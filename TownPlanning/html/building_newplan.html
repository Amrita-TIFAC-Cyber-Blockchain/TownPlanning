<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Building Plan Approval</title>

    <!--Bootstrap-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>

    <!--JQUERY-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
  </head>
  <style>
    label {
      display: inline-block;
      clear: left;
      width: 250px;
      text-align: left;
    }
    input,
    select,
    button {
      display: inline-block;
      margin: 2px;
    }
  </style>

  <script>
    function fileValidation() {
      var fileInput = document.getElementById("plan_file");

      var filePath = fileInput.value;

      // Allowing file type
      var allowedExtensions = /(\.doc|\.docx|\.odt|\.pdf|\.tex|\.txt|\.rtf|\.wps|\.wks|\.wpd)$/i;

      if (!allowedExtensions.exec(filePath)) {
        alert("Invalid file type");
        fileInput.value = "";
      }

      const fi = document.getElementById("birth_file");
      // Check if any file is selected.
      if (fi.files.length > 0) {
        for (const i = 0; i <= fi.files.length - 1; i++) {
          const fsize = fi.files.item(i).size;
          const file = Math.round(fsize / 1024);
          // The size of the file.
          if (file >= 5120) {
            alert("File too Big, please select a file less than 5mb");
            fileInput.value = "";
            return false;
          }
        }
      }
    }
  </script>

  <body>
    <header
      style="
        background-color: black;
        color: white;
        padding: 20px;
        text-align: center;
      "
    >
      <h1>Enter Details</h1>
      <a href="output.html">View Details</a>
    </header>
    <div class="" id="" style="margin: 100px;">
      <h2>Applicant Details</h2>
      <br />
      <form>
        <label for="">Name</label>
        <input type="text" id="" placeholder="Name" />
        <br />
        <label for="">Phone Number</label>
        <input type="tel" id="" placeholder="Phone Number" />
        <br />
        <label for="">Applicant's Email ID</label>
        <input type="email" id="" placeholder="Email ID" />
        <br />
        <label for="">Address Line 1</label>
        <input type="text" id="" placeholder="Address Line 1" />
        <br />
        <label for="">Address Line 2</label>
        <input type="text" id="" placeholder="Address Line 2" />
        <br />
        <label for="">Designation</label>
        <select id="" name="Emergency Device type">
          <option value="Manager">Manager</option>
          <option value="Architect">Architect</option>
          <option value="Owner">Owner</option>
          <option value="Government">Government</option>
          <option value="Other">Other</option>
        </select>
        <br />

        <button type="" class="btn btn-primary">
          Continue
        </button>
      </form>
    </div>
    <hr />
    <div class="" id="" style="margin: 100px;">
      <h2>Building Details</h2>
      <br />
      <form>
        <label for="">Building Type</label>
        <select id="" name="">
          <option value="Residential">Residential</option>
          <option value="Commercial">Commercial</option>
          <option value="Institutional">Institutional</option>
          <option value="Industrial">Industrial</option>
          <option value="Government">Government</option>
          <option value="Other">Other</option>
        </select>
        <br />
        <label for="">Plot Number</label>
        <input type="number" id="" placeholder="Plot Number" />
        <br />

        <label for="">Street</label>
        <input type="text" id="" placeholder="Street" />
        <br />
        <label for="">Ward Number</label>
        <input type="number" id="" placeholder="Ward Number" />
        <br />
        <label for="">District</label>
        <select id="" name="">
          <option value="Chennai">Chennai</option>
          <option value="Chengalpattu">Chengalpattu</option>
          <option value="Coimbatore">Coimbatore</option>
          <option value="Thiruvallur">Thiruvallur</option>
          <option value="Namakkal">Namakkal</option>
          <option value="Other">Other</option>
        </select>
        <br />
        <label for="">Area in SquareFeet</label>
        <input type="number" id="" placeholder="Area" />
        <br />

        <button type="" class="btn btn-primary">
          Continue
        </button>
      </form>
    </div>
    <hr />
    <div class="" id="" style="margin: 100px;">
      <h2>Proposed Plan</h2>
      <br />
      <form id="plan-form">
        <label>Upload Proposed Building Plan</label>
        <input
          type="file"
          id="plan_file"
          name="plan_file"
          multiple
          onchange="return fileValidation()"
        /><br />

        <button type="submit" class="btn btn-primary" onclick="onclick1()">
          Submit
        </button>
      </form>
    </div>
    <footer
      style="
        text-align: center;
        background-color: black;
        color: white;
        padding: 2px;
      "
    >
      Â©Amrita Blockchain Team -2020
    </footer>
	
	 <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.js"></script>
		<script>	
	
		var account;
		window.addEventListener('load', async () => {

		
			if (typeof window.ethereum !== 'undefined') { 
				console.log("MetaMask is Available :) !"); 
				}
				
			// Modern DApp browsers
			if (window.ethereum) {
				window.web3 = new Web3(ethereum);
				
				// To prevent the page reloading when the MetaMask network changes
				ethereum.autoRefreshOnNetworkChange = false;
				
				// To Capture the account details from MetaMask
				const accounts = await ethereum.enable();
				account = accounts[0];
				
				}
			// Legacy DApp browsers
			else if (window.web3) {
				//window.web3 = new Web3(web3.currentProvider);
				window.web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/cbd9dc11b30147e9a2cc974be655ef7c")); 
				}
			// Non-DApp browsers
			else {
				console.log('Non-Ethereum browser detected. Please install MetaMask');
				}
				
				loadstatus();
				
				});
		
		</script>
  </body>
</html>
